(function(b,h,n,t){function c(a,d){this.options=d||{};this.options.scope=this.options.scope||g.Parent;this.options.className=this.options.className||"stick";this.options.top=this.options.top||0;this.options.extraHeight=this.options.extraHeight||0;this.element=b(a);this.stick=f.None;this.spacer=b("<div />");this.spacer[0].id=a.id;this.spacer[0].className=a.className;this.spacer[0].style.cssText=a.style.cssText;this.spacer.addClass(p);this.spacer.css({display:"none",visibility:"hidden"});this.spacer.insertAfter(this.element);
"static"==this.element.parent().css("position")&&this.element.parent().css("position","relative");this.bound();this.precalculate();this.store()}function q(){b(k).each(function(){b(this).data(e).resize()})}function r(){b(k).each(function(){b(this).data(e).locate()})}var e="jquery-stickit",p=e+"-spacer",k=":"+e,l=-1!=navigator.userAgent.indexOf("MSIE 7.0"),m=l?-2:0,g={Parent:0,Document:1},f={None:0,Fixed:1,Absolute:2};h.StickScope=g;c.prototype.store=function(){var a=this.element[0];this.origStyle=
{width:a.style.width,position:a.style.position,left:a.style.left,top:a.style.top,bottom:a.style.bottom,zIndex:a.style.zIndex}};c.prototype.restore=function(){this.element.css(this.origStyle)};c.prototype.bound=function(){var a=this.element;if(l||"border-box"!=a.css("box-sizing"))this.extraWidth=0;else{var d=parseInt(a.css("border-left-width"))||0,s=parseInt(a.css("border-right-width"))||0,b=parseInt(a.css("padding-left"))||0,c=parseInt(a.css("padding-right"))||0;this.extraWidth=d+s+b+c}this.margin=
{top:parseInt(a.css("margin-top"))||0,bottom:parseInt(a.css("margin-bottom"))||0,left:parseInt(a.css("margin-left"))||0,right:parseInt(a.css("margin-right"))||0};this.parent={border:{bottom:parseInt(a.parent().css("border-bottom-width"))||0}}};c.prototype.precalculate=function(){this.baseTop=this.margin.top+this.options.top;this.basePadding=this.baseTop+this.margin.bottom;this.baseParentOffset=this.options.extraHeight-this.parent.border.bottom};c.prototype.reset=function(){this.stick=f.None;this.spacer.hide();
this.spacer.css("width","");this.restore();this.element.removeClass(this.options.className)};c.prototype.setAbsolute=function(a){this.stick==f.None&&this.element.addClass(this.options.className);this.stick=f.Absolute;this.element.css({width:this.element.width()+this.extraWidth+"px",position:"absolute",top:this.origStyle.top,left:a+"px",bottom:-this.options.extraHeight+"px","z-index":"99"})};c.prototype.setFixed=function(a){this.stick==f.None&&this.element.addClass(this.options.className);this.stick=
f.Fixed;this.element.css({width:this.element.width()+this.extraWidth+"px",position:"fixed",top:this.options.top+"px",left:a+"px",bottom:this.origStyle.bottom,"z-index":"0"})};c.prototype.locate=function(){var a=this.element,d=this.spacer;switch(this.stick){case f.Fixed:var b=d[0].getBoundingClientRect(),c=b.top-this.baseTop;0<=c?this.reset():this.options.scope==g.Parent&&(b=a.parent()[0].getBoundingClientRect(),b.bottom+this.baseParentOffset<=a.outerHeight()+this.basePadding&&this.setAbsolute(this.spacer.position().left));
break;case f.Absolute:var b=d[0].getBoundingClientRect(),c=b.top-this.baseTop,e=b.left-this.margin.left;0<=c?this.reset():(b=a.parent()[0].getBoundingClientRect(),b.bottom+this.baseParentOffset>a.outerHeight()+this.basePadding&&this.setFixed(e+m));break;default:b=a[0].getBoundingClientRect();c=b.top-this.baseTop;if(0<=c)break;d.height(a.height());d.show();e=b.left-this.margin.left;this.options.scope==g.Document?this.setFixed(e):a.parent()[0].getBoundingClientRect().bottom+this.baseParentOffset<=a.outerHeight()+
this.basePadding?this.setAbsolute(this.element.position().left):this.setFixed(e+m);d.width()||d.width(a.width())}};c.prototype.resize=function(){this.bound();this.precalculate();if(this.stick!=f.None){var a=this.element,b=this.spacer;a.width(b.width());b.height(a.height());this.stick==f.Fixed&&(b=this.spacer[0].getBoundingClientRect().left-this.margin.left,a.css("left",b+"px"));this.locate()}};b.fn.stickit=function(a){this.each(function(){var d=new c(this,a);b(this).data(e,d);d.locate()})};b.expr[":"][e]=
function(a){return!!b(a).data(e)};b(n).ready(function(){b(h).bind("resize",q).bind("scroll",r)})})(jQuery,window,document);
